{
  "_schema_version": "1.0",
  "_godot_version": "4.5",
  "_system_id": "S26",
  "_created": "2025-11-18",
  "_description": "Difficulty scaling configuration for rhythm mini-games",

  "difficulty_config": {
    "normal": {
      "display_name": "Normal",
      "description": "Standard timing window for casual play",
      "timing_window_ms": 100,
      "pattern_complexity": "simple",
      "bpm": 120,
      "score_multiplier": 1.0,
      "recommended_for": "story_moments",
      "visual_settings": {
        "note_speed": 1.0,
        "visual_cue_size": 1.2,
        "timing_bar_thickness": 3
      },
      "success_criteria": {
        "min_accuracy_percent": 60,
        "min_perfect_hits": 0,
        "allow_retries": true
      },
      "combo_settings": {
        "combo_increment": 0.1,
        "max_multiplier": 3.0,
        "combo_decay_enabled": false
      }
    },

    "hard": {
      "display_name": "Hard",
      "description": "Tighter timing window for skilled players",
      "timing_window_ms": 70,
      "pattern_complexity": "moderate",
      "bpm": 150,
      "score_multiplier": 1.5,
      "recommended_for": "boss_phases",
      "visual_settings": {
        "note_speed": 1.3,
        "visual_cue_size": 1.0,
        "timing_bar_thickness": 2
      },
      "success_criteria": {
        "min_accuracy_percent": 70,
        "min_perfect_hits": 3,
        "allow_retries": true
      },
      "combo_settings": {
        "combo_increment": 0.1,
        "max_multiplier": 3.0,
        "combo_decay_enabled": false
      }
    },

    "expert": {
      "display_name": "Expert",
      "description": "Extreme precision required for masters",
      "timing_window_ms": 50,
      "pattern_complexity": "complex",
      "bpm": 180,
      "score_multiplier": 2.0,
      "recommended_for": "training_mode",
      "visual_settings": {
        "note_speed": 1.5,
        "visual_cue_size": 0.8,
        "timing_bar_thickness": 1
      },
      "success_criteria": {
        "min_accuracy_percent": 80,
        "min_perfect_hits": 10,
        "allow_retries": true
      },
      "combo_settings": {
        "combo_increment": 0.1,
        "max_multiplier": 3.0,
        "combo_decay_enabled": true,
        "combo_decay_time_ms": 2000
      }
    }
  },

  "pattern_complexity_definitions": {
    "simple": {
      "description": "Quarter notes and simple patterns",
      "max_notes_per_measure": 4,
      "allows_syncopation": false,
      "allows_polyrhythm": false,
      "note_types": ["quarter", "half", "whole"]
    },
    "moderate": {
      "description": "Eighth notes and basic syncopation",
      "max_notes_per_measure": 8,
      "allows_syncopation": true,
      "allows_polyrhythm": false,
      "note_types": ["quarter", "eighth", "syncopated"]
    },
    "complex": {
      "description": "Polyrhythms and advanced patterns",
      "max_notes_per_measure": 12,
      "allows_syncopation": true,
      "allows_polyrhythm": true,
      "note_types": ["quarter", "eighth", "sixteenth", "triplet", "polyrhythm"]
    }
  },

  "timing_feedback": {
    "perfect": {
      "window_ms_range": [0, 50],
      "score_points": 100,
      "combo_effect": "increment",
      "visual_color": "#00FF00",
      "display_text": "PERFECT!",
      "particle_effect": "perfect_burst"
    },
    "good": {
      "window_ms_range": [51, 100],
      "score_points": 50,
      "combo_effect": "maintain",
      "visual_color": "#FFFF00",
      "display_text": "Good",
      "particle_effect": "good_flash"
    },
    "miss": {
      "window_ms_range": [101, 999999],
      "score_points": 0,
      "combo_effect": "reset",
      "visual_color": "#FF0000",
      "display_text": "Miss",
      "particle_effect": "miss_smoke"
    }
  },

  "game_mode_modifiers": {
    "story": {
      "description": "Story rhythm moments - forgiving, no pressure",
      "allow_unlimited_retries": true,
      "show_timing_guide": true,
      "failure_penalty": "retry",
      "success_reward": "story_progression",
      "difficulty_adjustment": "auto_easier_on_retry"
    },
    "boss": {
      "description": "Boss rhythm phases - high stakes, meaningful outcomes",
      "allow_unlimited_retries": false,
      "show_timing_guide": true,
      "failure_penalty": "boss_enraged",
      "success_reward": "boss_stunned",
      "difficulty_adjustment": "fixed",
      "boss_specific": {
        "stun_multiplier": 1.0,
        "enrage_multiplier": 1.5,
        "damage_bonus_on_perfect": 2.0
      }
    },
    "training": {
      "description": "Training mode - skill building, high score tracking",
      "allow_unlimited_retries": true,
      "show_timing_guide": true,
      "failure_penalty": "none",
      "success_reward": "high_score_tracking",
      "difficulty_adjustment": "player_selectable",
      "training_specific": {
        "show_input_timing": true,
        "show_accuracy_meter": true,
        "show_combo_tips": true,
        "track_personal_best": true
      }
    }
  },

  "visual_feedback_config": {
    "note_highway": {
      "length_px": 500,
      "width_px": 80,
      "scroll_speed_multiplier": 1.0,
      "spawn_distance_beats": 4
    },
    "timing_indicator": {
      "perfect_zone_px": 20,
      "good_zone_px": 40,
      "miss_zone_px": 80,
      "indicator_color": "#FFFFFF",
      "zone_colors": {
        "perfect": "#00FF00",
        "good": "#FFFF00",
        "miss": "#FF0000"
      }
    },
    "combo_display": {
      "position": "top_right",
      "font_size": 48,
      "show_multiplier": true,
      "animate_on_change": true,
      "color_by_combo": {
        "0-9": "#FFFFFF",
        "10-19": "#FFFF00",
        "20+": "#FF00FF"
      }
    }
  },

  "audio_feedback": {
    "hit_sounds": {
      "perfect": "res://assets/audio/sfx/rhythm_perfect.wav",
      "good": "res://assets/audio/sfx/rhythm_good.wav",
      "miss": "res://assets/audio/sfx/rhythm_miss.wav"
    },
    "combo_milestone_sounds": {
      "10": "res://assets/audio/sfx/combo_10.wav",
      "20": "res://assets/audio/sfx/combo_20.wav",
      "30": "res://assets/audio/sfx/combo_max.wav"
    },
    "sequence_sounds": {
      "start": "res://assets/audio/sfx/sequence_start.wav",
      "complete_success": "res://assets/audio/sfx/sequence_success.wav",
      "complete_fail": "res://assets/audio/sfx/sequence_fail.wav"
    }
  },

  "accessibility_options": {
    "visual_metronome": {
      "enabled": true,
      "flash_on_beat": true,
      "color": "#FFFFFF"
    },
    "audio_metronome": {
      "enabled": false,
      "volume_db": -6,
      "sound_path": "res://assets/audio/sfx/metronome_tick.wav"
    },
    "timing_assist": {
      "enabled": false,
      "expand_window_percent": 20,
      "description": "Increases timing window by 20% for accessibility"
    },
    "visual_accessibility": {
      "high_contrast_mode": false,
      "colorblind_mode": "none",
      "reduce_motion": false
    }
  },

  "progression_unlocks": {
    "difficulty_unlocks": {
      "hard": {
        "requires_story_patterns_complete": 3,
        "requires_normal_accuracy": 70
      },
      "expert": {
        "requires_story_patterns_complete": 10,
        "requires_hard_accuracy": 80,
        "requires_max_combo": 20
      }
    },
    "pattern_unlocks": {
      "polyrhythm_3_4": {
        "requires_patterns_complete": 5,
        "requires_difficulty": "hard"
      },
      "final_boss": {
        "requires_boss_phases_complete": 3,
        "requires_difficulty": "expert"
      }
    }
  },

  "metadata": {
    "difficulty_levels": 3,
    "default_difficulty": "normal",
    "recommended_progression": ["normal", "hard", "expert"],
    "timing_window_philosophy": "Windows based on human reaction time (100ms = average, 50ms = professional musician)",
    "bpm_philosophy": "BPM increases with difficulty to challenge timing and focus",
    "pattern_complexity_philosophy": "Complexity increases note density and rhythmic sophistication"
  }
}
